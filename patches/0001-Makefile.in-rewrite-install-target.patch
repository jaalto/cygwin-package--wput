From 717a42bf6da73e6dac46f696a5d2adf239ae4505 Mon Sep 17 00:00:00 2001
From: Jari Aalto <jari.aalto@cante.net>
Date: Wed, 3 Nov 2010 23:18:58 +0200
Subject: [PATCH] Makefile.in: rewrite install target
Organization: Private
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

Signed-off-by: Jari Aalto <jari.aalto@cante.net>
---
 Makefile.in |   39 +++++++++++++++++++++++++++++++--------
 1 files changed, 31 insertions(+), 8 deletions(-)

diff --git a/Makefile.in b/Makefile.in
index 6756cd2..7aac615 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -1,10 +1,23 @@
 #wput makefile
-PACKAGE     = @PACKAGE@
-prefix      = @prefix@
-datadir     = $(prefix)/share
-mandir	    = $(datadir)/man/man1
-exec_prefix = @exec_prefix@
-bindir=@bindir@
+# PACKAGE     = @PACKAGE@
+# prefix      = @prefix@
+# datadir     = $(prefix)/share
+# mandir	    = $(datadir)/man/man1
+# exec_prefix = @exec_prefix@
+# bindir=@bindir@
+
+DESTDIR =
+prefix          = /usr
+exec_prefix     = $(prefix)
+man_prefix      = $(prefix)/share
+
+INSTALL 	= /usr/bin/install
+INSTALL_BIN     = $(INSTALL) -m 755
+INSTALL_DATA    = $(INSTALL) -m 644
+INSTALL_OBJS    = wput
+
+MANDIR          = $(DESTDIR)$(man_prefix)/man/man1
+BINDIR          = $(DESTDIR)$(exec_prefix)/bin
 
 all clean:
 	cd po && $(MAKE) $(MAKEDEFS) $@
@@ -14,7 +27,7 @@ all clean:
 win-clean:
 	cd src && $(MAKE) $(MAKEDEFS) $@
 
-install: all
+install-old: all
 	cd po && $(MAKE) $(MAKEDEFS) $@
 	mkdir -p $(bindir) 
 	mkdir -p $(mandir) 
@@ -35,4 +48,14 @@ uninstall:
 	rm -f $(bindir)/wdel
 	rm -f $(mandir)/wput.1.gz
 	rm -f $(mandir)/wdel.1.gz
-	
+
+install-bin:
+	$(INSTALL_BIN) -d $(BINDIR)
+	$(INSTALL_BIN) -s $(INSTALL_OBJS) $(BINDIR)
+	cd $(BINDIR) && ln -s wput wdel
+
+install-man:
+	$(INSTALL_BIN) -d $(MANDIR)
+	$(INSTALL_DATA) doc/*.1* $(MANDIR)
+
+install: install-bin install-man
-- 
1.7.2.3

